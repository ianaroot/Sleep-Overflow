<br>
<h2><%= @question.title %></h2>

<% if current_user %>
  <%if vote = current_vote(@question) %>
    <%= form_for vote, url: question_vote_path(@question, vote) do |f| %>
      <%= f.hidden_field(:up_down, value: true) %>
      <%= f.submit "Upvote"%>
    <% end %>
  <% else %>
    <%= form_for @vote, url: question_votes_path(@question, @vote) do |f| %>
      <%= f.hidden_field(:votable_id, value: @question.id) %>
      <%= f.hidden_field(:votable_type, value: "Question") %>
      <%= f.hidden_field(:up_down, value: true) %>
      <%= f.submit "Upvote"%>
    <% end %>
  <% end %>
<% end %>
<span class="question_score" ><%= @question.score %></span>
<% if current_user %>
  <%if vote = current_vote(@question) %>
    <%= form_for vote, url: question_vote_path(@question, vote) do |f| %>
      <%= f.hidden_field(:up_down, value: false) %>
      <%= f.submit "Downvote"%>
    <% end %>
  <% else %>
    <%= form_for @vote, url: question_votes_path(@question, @vote) do |f| %>
      <%= f.hidden_field(:votable_id, value: @question.id) %>
      <%= f.hidden_field(:votable_type, value: "Question") %>
      <%= f.hidden_field(:up_down, value: false) %>
      <%= f.submit "Downvote"%>
    <% end %>
  <% end %>
<% end %>
<p><strong><%= @question.content %></strong></p>

<% @question.comments.each do |comment| %>
  <%= comment.content %><br>
<% end %>

<% if current_user %>
  <%= form_tag(new_question_comment_path(@question), method: "get") do%>
    <%= button_tag('comment on this question') %>
  <% end %><br><br><br><br><br><br>
<% end %>

<% @question.answers.each do |answer| %>

  <% if current_user %>
    <%if vote = current_vote(answer) %>
      <%= form_for vote, url: answer_vote_path(answer, vote) do |f| %>
        <%= f.hidden_field(:up_down, value: true) %>
        <%= f.submit "Upvote"%>
      <% end %>
    <% else %>
      <%= form_for @vote, url: answer_votes_path(answer, @vote) do |f| %>
        <%= f.hidden_field(:votable_id, value: answer.id) %>
        <%= f.hidden_field(:votable_type, value: "Answer") %>
        <%= f.hidden_field(:up_down, value: true) %>
        <%= f.submit "Upvote"%>
      <% end %>
    <% end %>
  <% end %>
  <span class="answer_score" ><%= answer.score %></span>
  <% if current_user %>
    <%if vote = current_vote(answer) %>
      <%= form_for vote, url: answer_vote_path(answer, vote) do |f| %>
        <%= f.hidden_field(:up_down, value: false) %>
        <%= f.submit "Downvote"%>
      <% end %>
    <% else %>
      <%= form_for @vote, url: answer_votes_path(answer, @vote) do |f| %>
        <%= f.hidden_field(:votable_id, value: answer.id) %>
        <%= f.hidden_field(:votable_type, value: "Answer") %>
        <%= f.hidden_field(:up_down, value: false) %>
        <%= f.submit "Downvote"%>
      <% end %>
    <% end %>
  <% end %>
  <strong><%= answer.content %></strong><br><br>

  <% answer.comments.each do |comment| %>
    <%= comment.content %><br>
  <% end %><br>
  <% if current_user %>
    <%= form_tag(new_answer_comment_path(answer), method: "get") do%>
      <%= button_tag('comment on this answer') %>
    <% end %><br><br>
  <% end %>
<% end %>
